<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>betaOS 8.1 Ultimate</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        /* --- –°–ò–°–¢–ï–ú–ù–´–ï –°–¢–ò–õ–ò --- */
        :root {
            --bg-glass: rgba(22, 22, 29, 0.95);
            --bg-menu: rgba(28, 28, 35, 0.95);
            --accent: #00d2ff;
            --border: 1px solid rgba(255, 255, 255, 0.1);
            --text: #ffffff;
        }

        body {
            margin: 0; overflow: hidden; font-family: 'Inter', sans-serif;
            background: url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2672') no-repeat center center fixed;
            background-size: cover; height: 100vh; color: var(--text); user-select: none;
        }

        /* --- –†–ê–ë–û–ß–ò–ô –°–¢–û–õ --- */
        #desktop { padding: 20px; display: flex; flex-direction: column; gap: 15px; height: calc(100vh - 80px); flex-wrap: wrap; align-content: flex-start; }
        .d-icon { width: 85px; padding: 10px; display: flex; flex-direction: column; align-items: center; cursor: pointer; border-radius: 8px; transition: 0.2s; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
        .d-icon:hover { background: rgba(255,255,255,0.1); transform: scale(1.05); }
        .d-icon span { font-size: 36px; margin-bottom: 5px; }

        /* --- START MENU --- */
        #start-menu {
            position: fixed; bottom: -600px; left: 50%; transform: translateX(-50%);
            width: 600px; height: 450px; background: var(--bg-menu); backdrop-filter: blur(30px);
            border: var(--border); border-radius: 12px; z-index: 10000;
            transition: bottom 0.3s cubic-bezier(0.2, 0.8, 0.2, 1); display: flex; flex-direction: column; padding: 20px; box-sizing: border-box;
        }
        #start-menu.active { bottom: 80px; }
        .apps-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 15px; flex: 1; align-content: start; margin-top: 15px; }
        .app-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; padding: 10px; border-radius: 6px; transition: 0.2s; }
        .app-item:hover { background: rgba(255,255,255,0.1); }
        .menu-footer { margin-top: auto; padding-top: 15px; border-top: var(--border); display: flex; justify-content: space-between; align-items: center; }

        /* --- TASKBAR --- */
        #taskbar {
            position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%);
            background: rgba(30, 30, 35, 0.85); backdrop-filter: blur(25px);
            border: var(--border); border-radius: 18px; height: 55px;
            display: flex; align-items: center; padding: 0 15px; gap: 12px; z-index: 10001;
        }
        .tb-icon { font-size: 24px; width: 42px; height: 42px; border-radius: 10px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; }
        .tb-icon:hover { background: rgba(255,255,255,0.15); transform: translateY(-3px); }
        .tb-icon.start { background: linear-gradient(135deg, #00d2ff, #2ecc71); color: #000; }

        /* --- WINDOWS --- */
        .window {
            position: absolute; background: var(--bg-glass); backdrop-filter: blur(20px);
            border: var(--border); border-radius: 10px; box-shadow: 0 25px 60px rgba(0,0,0,0.7);
            display: flex; flex-direction: column; min-width: 300px; min-height: 200px;
            resize: both; overflow: hidden; animation: pop 0.2s;
        }
        @keyframes pop { from{transform:scale(0.95); opacity:0} to{transform:scale(1); opacity:1} }
        .win-head { height: 38px; background: rgba(255,255,255,0.05); display: flex; justify-content: space-between; align-items: center; padding: 0 12px; cursor: grab; border-bottom: var(--border); }
        .win-body { flex: 1; position: relative; overflow: auto; display: flex; flex-direction: column; }

        /* --- TERMINAL EXTRAS --- */
        .term-wrap { background: #050505; color: #0f0; font-family: 'JetBrains Mono', monospace; padding: 15px; height: 100%; font-size: 13px; overflow-y: auto; overflow-x: hidden; position: relative; }

        /* NYAN CAT ANIMATION */
        .nyan-line { margin: 10px 0; display: flex; align-items: center; gap: 10px; animation: slideRight 3s linear infinite; }
        @keyframes slideRight { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        .rainbow { height: 10px; flex: 1; background: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet); border-radius: 5px; width: 100px; }

        /* MATRIX CANVAS */
        .matrix-cvs { position: absolute; top:0; left:0; width:100%; height:100%; opacity: 0.3; pointer-events: none; display: none; }

        /* SETTINGS */
        .set-layout { display: grid; grid-template-columns: 140px 1fr; height: 100%; }
        .set-side { background: rgba(0,0,0,0.3); padding: 10px; border-right: var(--border); }
        .set-tab { padding: 10px; cursor: pointer; border-radius: 6px; font-size: 13px; color: #ccc; margin-bottom: 5px; }
        .set-tab.active { background: var(--accent); color: #000; font-weight: 600; }
        .set-content { padding: 20px; }
        .wp-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; margin-top: 10px; }
        .wp-item { height: 60px; border-radius: 6px; background-size: cover; cursor: pointer; border: 2px solid transparent; }
        .wp-item:hover { border-color: var(--accent); }

        /* --- NIGHTMARE SCREEN --- */
        #panic-screen {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; color: #ff0000; font-family: 'Share Tech Mono', monospace;
            padding: 40px; box-sizing: border-box; z-index: 99999;
            overflow: hidden;
        }
        .panic-line { margin-bottom: 5px; font-size: 18px; text-shadow: 2px 2px 0px #300; }
        .glitch { animation: glitch-anim 0.3s infinite; }
        .big-fail { font-size: 60px; font-weight: bold; margin-top: 50px; color: #ff0000; text-shadow: 4px 4px 0px #500; animation: shake 0.5s infinite; }

        @keyframes glitch-anim { 0% { transform: translate(0) } 20% { transform: translate(-2px, 2px) } 40% { transform: translate(-2px, -2px) } 60% { transform: translate(2px, 2px) } 80% { transform: translate(2px, -2px) } 100% { transform: translate(0) } }
        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 10% { transform: translate(-1px, -2px) rotate(-1deg); } 20% { transform: translate(-3px, 0px) rotate(1deg); } 30% { transform: translate(3px, 2px) rotate(0deg); } 40% { transform: translate(1px, -1px) rotate(1deg); } 50% { transform: translate(-1px, 2px) rotate(-1deg); } 60% { transform: translate(-3px, 1px) rotate(0deg); } 70% { transform: translate(3px, 1px) rotate(-1deg); } 80% { transform: translate(-1px, -1px) rotate(1deg); } 90% { transform: translate(1px, 2px) rotate(0deg); } 100% { transform: translate(1px, -2px) rotate(-1deg); } }

    </style>
</head>
<body>

    <div id="system-root">
        <div id="desktop">
            <div class="d-icon" ondblclick="os.open('terminal')"><span>üíª</span><p>Terminal</p></div>
            <div class="d-icon" ondblclick="os.open('settings')"><span>‚öôÔ∏è</span><p>Settings</p></div>
            <div class="d-icon" ondblclick="os.open('browser')"><span>üåç</span><p>Browser</p></div>
            <div class="d-icon" ondblclick="os.open('notepad')"><span>üìù</span><p>–ë–ª–æ–∫–Ω–æ—Ç</p></div>
            <div class="d-icon" ondblclick="os.open('paint')"><span>üé®</span><p>Paint</p></div>
        </div>

        <div id="start-menu">
            <input type="text" placeholder="–ü–æ–∏—Å–∫..." style="background:rgba(0,0,0,0.3); border:1px solid #444; border-radius:6px; padding:10px; color:white; width:100%; box-sizing:border-box; outline:none">
            <div class="apps-grid">
                <div class="app-item" onclick="os.launch('terminal')"><span>üíª</span><div>Terminal</div></div>
                <div class="app-item" onclick="os.launch('settings')"><span>‚öôÔ∏è</span><div>Settings</div></div>
                <div class="app-item" onclick="os.launch('browser')"><span>üåç</span><div>Browser</div></div>
                <div class="app-item" onclick="os.launch('paint')"><span>üé®</span><div>Paint</div></div>
                <div class="app-item" onclick="os.launch('pong')"><span>üèì</span><div>Pong</div></div>
                <div class="app-item" onclick="os.launch('snake')"><span>üêç</span><div>Snake</div></div>
            </div>
            <div class="menu-footer">
                <div style="font-weight:600">üë§ Qwenix Admin</div>
                <div style="cursor:pointer" onclick="location.reload()">‚≠ï</div>
            </div>
        </div>

        <div id="taskbar">
            <div class="tb-icon start" onclick="os.toggleStart()">‚ùñ</div>
            <div style="width:1px; height:20px; background:rgba(255,255,255,0.2)"></div>
            <div class="tb-icon" onclick="os.open('terminal')">üíª</div>
            <div class="tb-icon" onclick="os.open('browser')">üåç</div>
            <div class="tb-icon" onclick="os.open('settings')">‚öôÔ∏è</div>
            <div style="width:1px; height:20px; background:rgba(255,255,255,0.2)"></div>
            <div style="color:white; font-size:13px; font-weight:600" id="clock">00:00</div>
        </div>
    </div>

    <div id="panic-screen"></div>

    <script>
        const os = {
            zIndex: 100,

            toggleStart: function() { document.getElementById('start-menu').classList.toggle('active'); },
            launch: function(app) { this.toggleStart(); this.open(app); },

            open: function(app) {
                this.zIndex++;
                const id = 'win-' + Date.now();
                const win = document.createElement('div');
                win.className = 'window';
                win.id = id;
                win.style.zIndex = this.zIndex;
                win.style.top = (50 + Math.random()*50) + 'px';
                win.style.left = (50 + Math.random()*50) + 'px';

                let title = "App";
                let content = "";
                let w = "500px", h = "350px";
                let init = null;

                if(app === 'terminal') {
                    title = "root@betaOS";
                    content = `
                        <div class="term-wrap" onclick="document.getElementById('i-${id}').focus()">
                            <canvas id="mtx-${id}" class="matrix-cvs"></canvas>
                            <div id="o-${id}" style="position:relative; z-index:2">
                                <div>betaOS 8.1. Type <b style="color:#00d2ff">help</b>.<br></div>
                            </div>
                            <div style="display:flex; margin-top:5px; position:relative; z-index:2">
                                <span style="color:#00d2ff">root@qwenix:~#</span>&nbsp;
                                <input id="i-${id}" style="background:transparent; border:none; color:white; outline:none; flex:1; font-family:inherit" autocomplete="off">
                            </div>
                        </div>`;
                    init = () => this.initTerm(id);
                }
                else if(app === 'settings') {
                    title = "Settings"; w="650px"; h="450px";
                    content = `
                        <div class="set-layout">
                            <div class="set-side">
                                <div class="set-tab active" onclick="os.setTab(this, 's-wall')">üé® –û–±–æ–∏</div>
                                <div class="set-tab" onclick="os.setTab(this, 's-sys')">‚ÑπÔ∏è –°–∏—Å—Ç–µ–º–∞</div>
                            </div>
                            <div class="set-content">
                                <div id="s-wall">
                                    <h3>–§–æ–Ω —Ä–∞–±–æ—á–µ–≥–æ —Å—Ç–æ–ª–∞</h3>
                                    <div class="wp-grid">
                                        <div class="wp-item" style="background-image:url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2672')" onclick="document.body.style.backgroundImage=this.style.backgroundImage"></div>
                                        <div class="wp-item" style="background-image:url('https://images.unsplash.com/photo-1550684848-fac1c5b4e853?w=500')" onclick="document.body.style.backgroundImage=this.style.backgroundImage"></div>
                                        <div class="wp-item" style="background-image:url('https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=500')" onclick="document.body.style.backgroundImage=this.style.backgroundImage"></div>
                                    </div>
                                </div>
                                <div id="s-sys" style="display:none">
                                    <h3>–û —Å–∏—Å—Ç–µ–º–µ</h3>
                                    <p><b>OS:</b> betaOS 8.1</p>
                                    <p>–í–µ—Ä–Ω—É–ª–∏—Å—å nyan, hacker –∏ —Å—Ç–∞—Ä—ã–π neofetch.</p>
                                </div>
                            </div>
                        </div>`;
                }
                else if(app === 'browser') {
                    title = "Web Browser"; w="800px"; h="500px";
                    content = `<iframe src="https://ru.m.wikipedia.org" style="width:100%; height:100%; border:none; background:white"></iframe>`;
                }
                else if(app === 'paint') { title = "Paint"; w="600px"; h="450px"; content = `<div style="text-align:center; padding:20px; color:#666">Paint Loaded</div>`; }

                win.style.width = w; win.style.height = h;
                win.innerHTML = `
                    <div class="win-head" onmousedown="os.dragStart(event, '${id}')">
                        <span style="font-weight:600">${title}</span>
                        <div style="display:flex; gap:5px">
                            <button style="width:12px; height:12px; background:#ff5f57; border:none; border-radius:50%; cursor:pointer" onclick="document.getElementById('${id}').remove()"></button>
                        </div>
                    </div>
                    <div class="win-body">${content}</div>
                `;
                win.onmousedown = () => win.style.zIndex = ++this.zIndex;
                document.body.appendChild(win);
                if(init) setTimeout(init, 50);
            },

            setTab: function(el, id) {
                el.parentElement.querySelectorAll('.set-tab').forEach(b => b.classList.remove('active'));
                el.classList.add('active');
                const container = el.closest('.set-layout').querySelector('.set-content');
                Array.from(container.children).forEach(p => p.style.display = 'none');
                container.querySelector('#'+id).style.display = 'block';
            },

            initTerm: function(id) {
                const inp = document.getElementById(`i-${id}`);
                const out = document.getElementById(`o-${id}`);
                const cvs = document.getElementById(`mtx-${id}`);

                inp.addEventListener('keydown', e => {
                    if(e.key === 'Enter') {
                        const v = inp.value.trim();
                        out.innerHTML += `<div><span style="color:#00d2ff">‚ûú</span> ${v}</div>`;

                        if(v === 'sudo /rm system') {
                            inp.disabled = true;
                            this.destroySequence(out);
                        }
                        // --- NYAN CAT ---
                        else if(v === 'nyan') {
                            out.innerHTML += `
                                <div class="nyan-line">
                                    <div style="font-size:24px">üê±</div>
                                    <div class="rainbow"></div>
                                    <div style="color:pink; font-weight:bold; font-family: 'Comic Sans MS'">NYAN NYAN NYAN...</div>
                                </div>`;
                        }
                        // --- HACKER MODE ---
                        else if(v === 'hacker') {
                            out.innerHTML += `<div style="color:#0f0">INITIALIZING MATRIX...</div>`;
                            cvs.style.display = 'block';
                            this.startMatrix(cvs);
                        }
                        // --- OLD NEOFETCH ---
                        else if(v === 'neofetch') {
                            out.innerHTML += `
                            <div style="display:flex; gap:20px; margin:10px 0; color:#00d2ff">
                                <pre style="font-weight:bold">
   /\\
  /  \\    betaOS
 /____\\   8.1
/      \\  Qwenix
                                </pre>
                                <div style="color:#ddd; font-family:'Inter'">
                                    <div><b>User:</b> Qwenix</div>
                                    <div><b>Shell:</b> JS-Term</div>
                                    <div><b>Kernel:</b> Web 3.0</div>
                                    <div><b>Uptime:</b> Forever</div>
                                </div>
                            </div>`;
                        }
                        else if(v === 'clear') { out.innerHTML = ''; cvs.style.display='none'; }
                        else if(v === 'help') { out.innerHTML += `<div style="color:#888">neofetch, sudo /rm system, nyan, hacker, browser</div>`; }
                        else { out.innerHTML += `<div style="color:#ff4757">Cmd not found</div>`; }

                        inp.value = '';
                        out.parentElement.scrollTop = out.parentElement.scrollHeight;
                    }
                });
                inp.focus();
            },

            // --- MATRIX ANIMATION ---
            startMatrix: function(canvas) {
                const ctx = canvas.getContext('2d');
                canvas.width = canvas.parentElement.clientWidth;
                canvas.height = canvas.parentElement.clientHeight;
                const cols = Math.floor(canvas.width / 14);
                const drops = Array(cols).fill(1);

                const draw = () => {
                    ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = '#0F0';
                    ctx.font = '14px monospace';
                    for(let i=0; i<drops.length; i++) {
                        const text = String.fromCharCode(0x30A0 + Math.random()*96);
                        ctx.fillText(text, i*14, drops[i]*14);
                        if(drops[i]*14 > canvas.height && Math.random() > 0.975) drops[i]=0;
                        drops[i]++;
                    }
                }
                setInterval(draw, 33);
            },

            // --- DESTRUCTION ---
            destroySequence: function(termOut) {
                const logs = ["Requesting ROOT access... [GRANTED]", "Stopping critical services...", "Killing init process...", "Deleting /boot/vmlinuz...", "Deleting /etc/fstab...", "Unmounting /dev/sda1...", "Formatting partition table...", "Deleting user Qwenix...", "Corruption detected in memory block 0xA000...", "Kernel is unstable...", "CPU OVERHEAT DETECTED...", "CRITICAL ERROR: SYSTEM HALTED"];
                let i = 0;
                const interval = setInterval(() => {
                    if(i >= logs.length) { clearInterval(interval); this.triggerKernelPanic(); return; }
                    termOut.innerHTML += `<div style="color:#ff3333; font-family:'Share Tech Mono'">[KERNEL] ${logs[i]}</div>`;
                    termOut.parentElement.scrollTop = termOut.parentElement.scrollHeight;
                    i++;
                }, 750);
            },

            triggerKernelPanic: function() {
                const sys = document.getElementById('system-root');
                const panic = document.getElementById('panic-screen');
                sys.style.filter = "brightness(0) blur(10px)";
                setTimeout(() => {
                    sys.style.display = 'none';
                    panic.style.display = 'block';
                    const errors = ["KERNEL PANIC - NOT SYNCING: ATTEMPTED TO KILL INIT!", "CPU 0: FATAL EXCEPTION", "EIP: 0060:[<c0100290>]", "CR2: 0000000000000000", "---[ end trace ]---", " "];
                    let i = 0;
                    const panicInt = setInterval(() => {
                        if(i >= errors.length) {
                            clearInterval(panicInt);
                            panic.innerHTML += `<div class="big-fail">SYSTEM DESTROYED</div>`;
                            panic.innerHTML += `<div class="panic-line glitch" style="margin-top:20px; color:white">Reboot is impossible.</div>`;
                            return;
                        }
                        panic.innerHTML += `<div class="panic-line">${errors[i]}</div>`;
                        i++;
                    }, 1000);
                }, 1000);
            },

            dragStart: function(e, id) {
                const win = document.getElementById(id);
                win.style.zIndex = ++this.zIndex;
                win.classList.add('dragging');
                const r = win.getBoundingClientRect();
                const ox = e.clientX - r.left, oy = e.clientY - r.top;
                const mv = ev => { win.style.left=(ev.clientX-ox)+'px'; win.style.top=(ev.clientY-oy)+'px'; };
                const up = () => { win.classList.remove('dragging'); document.removeEventListener('mousemove', mv); document.removeEventListener('mouseup', up); };
                document.addEventListener('mousemove', mv); document.addEventListener('mouseup', up);
            }
        };

        document.addEventListener('click', (e) => {
            const menu = document.getElementById('start-menu');
            const btn = document.querySelector('.tb-icon.start');
            if(!menu.contains(e.target) && !btn.contains(e.target)) menu.classList.remove('active');
        });

        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
        }, 1000);
    </script>
</body>
</html>
